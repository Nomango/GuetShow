(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aaf9996"],{"11fa":function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return y}));var i,l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"list-wrapper"},[e("div",{staticClass:"list-header-left",on:{click:t.handleonClickLeft}},[e("i",{staticClass:"van-icon van-icon-arrow-left van-nav-bar__arrow"})]),e("Title",{attrs:{title:"优秀毕设",subTitle:"Excellent Graduation Design & Thesis Exhibition"}}),e("div",{staticClass:"list-content"},[e("div",{staticClass:"list-form",class:[t.showFilter?"show-filter":""]},[e("div",{staticClass:"list-select-group"},[e("span",{staticClass:"list-order-by list-select-group-item",on:{click:t.handleOrderBy}},[e("van-icon",{attrs:{name:"sort"}}),t._v(" "+t._s(t.orderByTitle)+" ")],1),e("span",{staticClass:"list-filter list-select-group-item",on:{click:t.handleOpenSearch}},[e("van-icon",{attrs:{name:"filter-o"}}),t._v(" 按条件查找 ")],1)]),e("div",{staticClass:"list-filter-title"},[t._v(" - 过滤条件 - ")]),e("div",{staticClass:"list-select-group"},[e("Select",{attrs:{placeholder:"请选择学院",active:1===t.activeType},on:{"picker-show":function(e){return t.handlePickerShow(1)},"select-close":function(e){return t.handleSelectClose(1)}},model:{value:t.listQuery.school,callback:function(e){t.$set(t.listQuery,"school",e)},expression:"listQuery.school"}}),e("Select",{attrs:{placeholder:"选择奖项",active:3===t.activeType},on:{"picker-show":function(e){return t.handlePickerShow(3)},"select-close":function(e){return t.handleSelectClose(3)}},model:{value:t.listQuery.level,callback:function(e){t.$set(t.listQuery,"level",e)},expression:"listQuery.level"}})],1),e("div",{staticClass:"list-select-group"},[e("Input",{attrs:{placeholder:"搜索毕设名称 / 学生名称"},model:{value:t.listQuery.query,callback:function(e){t.$set(t.listQuery,"query",e)},expression:"listQuery.query"}})],1),e("div",{staticClass:"list-select-group"},[e("span",{staticClass:"list-query-clear list-select-group-item",on:{click:t.handleClear}},[e("van-icon",{attrs:{name:"revoke"}}),t._v(" 重置 ")],1),e("span",{staticClass:"list-query-clear list-select-group-item",on:{click:t.handleConfirmSearch}},[e("van-icon",{attrs:{name:"success"}}),t._v(" 确认 ")],1)]),e("div",{staticClass:"list-filter-title"},[e("van-icon",{attrs:{name:"close"},on:{click:t.handleOpenSearch}})],1)]),e("div",{staticClass:"guet-list-wrap"},[e("GList",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],ref:"gList",attrs:{requestData:t.handleLoadMore,refreshData:t.handleRefreshData,list:t.list,finished:t.finished},scopedSlots:t._u([{key:"default",fn:function({item:i}){return[e("div",{staticClass:"project-item",on:{click:function(e){return t.handleItemClick(i.id)}}},[e("div",{staticClass:"project-image-wrap"},[e("img",{staticClass:"project-image",attrs:{src:i.cover}}),t.LevelImage[i.level]?e("img",{staticClass:"project-level-image",attrs:{src:t.LevelImage[i.level],alt:""}}):t._e()]),e("div",{staticClass:"project-content"},[e("h2",{staticClass:"project-title u-ellipsis"},[t._v(t._s(i.name))]),e("div",{staticClass:"project-info"},[e("div",{staticClass:"project-info-image"},[e("img",{attrs:{src:s("d9a7"),alt:""}})]),e("span",{staticClass:"project-owner-name"},[t._v(" "+t._s(i.student&&i.student.name)+" ")]),e("span",{staticClass:"project-school"},[t._v(" "+t._s(i.school)+" ")])]),e("div",{staticClass:"project-description u-mutiple-ellipsis"},[e("span",[t._v(t._s(i.brief))])])])])]}}])})],1)]),e("van-popup",{attrs:{round:"",position:"bottom"},on:{close:t.handleClosePopup},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.curColumns},on:{cancel:t.handleCancel,confirm:t.handleConfirm}})],1)],1)},a=[],n=s("fd63"),o=s("3c3a"),r=s("3617"),c=s("6518");(function(t){t[t["school"]=1]="school",t[t["mentor"]=2]="mentor",t[t["level"]=3]="level",t[t["default"]=-1]="default"})(i||(i={}));const u={orderBy:"level",page:1,pageSize:10},h={origin:[{id:1,name:"一等奖"},{id:2,name:"二等奖"},{id:3,name:"三等奖"}],target:["一等奖","二等奖","三等奖"]};function d(t,e){let s=null;return function(){const i=this,l=arguments;s&&clearTimeout(s),s=setTimeout((function(){t.apply(i,l)}),e)}}function p(t,e,s){let i,l,a,n=0;s||(s={});const o=function(){n=!1===s.leading?0:(new Date).getTime(),i=null,t.apply(l,a),i||(l=a=null)},r=function(){const r=(new Date).getTime();n||!1!==s.leading||(n=r);const c=e-(r-n);l=this,a=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),n=r,t.apply(l,a),i||(l=a=null)):i||!1===s.trailing||(i=setTimeout(o,c))};return r}var v=s("1f2a");let f=class extends o["c"]{constructor(){super(...arguments),this.LevelImage={1:s("668f"),2:s("dbc7"),3:s("283d")},this.activeType=i.default,this.listQuery={query:"",mentor:"",level:"",school:""},this.temp={[i.school]:{origin:[],target:[]},[i.mentor]:{origin:[],target:[]},[i.level]:h},this.page=u.page,this.pageSize=u.pageSize,this.showPicker=!1,this.curColumns=[],this.list=[],this.loading=!1,this.totalCount=0,this.finished=!1,this.showFilter=!1,this.orderBy="level",this.orderByTitle="按评级排序",this.debounceGetWorks=d(()=>{this.handleGetWorks(!0)},300),this.throttleGetWorks=p(this.handleLoadMore,100)}async handleRefreshData(){await this.handleGetWorks()}async handleLoadMore(){const t=this.page+1;this.page=t,await this.handleGetWorks()}handleListQuery(){const t={...this.listQuery};if(t.mentor&&"string"===typeof t.mentor){const e=this.temp[i.mentor],s=((null===e||void 0===e?void 0:e.origin)||[]).find(e=>e.name===t.mentor);s&&(t.mentor=s.id)}if(t.level&&"string"===typeof t.level){const e=this.temp[i.level],s=((null===e||void 0===e?void 0:e.origin)||[]).find(e=>e.name===t.level);s&&(t.level=s.id)}return{...t,orderBy:this.orderBy,page:this.page,pageSize:this.pageSize}}async handleGetWorks(t){t&&(this.page=u.page);const e=await Object(c["c"])(this.handleListQuery()),{data:s}=e||{},i=(null===s||void 0===s?void 0:s.works)||[],l=null===s||void 0===s?void 0:s.total_count;!t&&i.length&&(this.list=this.list.concat(...i)),t&&(this.list=i,setTimeout(()=>{var t;null===(t=this.$refs.gList)||void 0===t||t.scrollToTop()},100)),this.loading=!1,this.totalCount=l,this.list.length===l?this.finished=!0:this.finished=!1}handleItemClick(t){t&&this.$router.push({path:"/detail/"+t})}handleonClickLeft(){this.$router.replace({path:"/"})}handleClosePopup(){this.reset()}handleCancel(){this.reset()}handleOpenSearch(){this.showFilter=!this.showFilter}handleOrderBy(){"level"==this.orderBy?(this.orderBy="name",this.orderByTitle="按名称排序"):(this.orderBy="level",this.orderByTitle="按评级排序"),this.debounceGetWorks()}handleConfirmSearch(){this.showFilter=!1,this.debounceGetWorks()}handleClear(){this.listQuery={query:"",mentor:"",level:"",school:""}}reset(){this.activeType=i.default,this.showPicker=!1}handleConfirm(t){if(this.activeType){const e=i[this.activeType];e&&(this.listQuery[e]=t)}this.activeType=i.default,this.showPicker=!1}handleSelectClose(t){const e=i[t];this.listQuery[e]=""}handlePickerShow(t){this.activeType=t,this.showPicker=!0;const e=this.temp[t];this.curColumns=(null===e||void 0===e?void 0:e.target)||[]}beforeEnter(t){t.style.opacity="0"}enter(t,e){const s=100*t.dataset.index;setTimeout(()=>{t.style.transition="opacity 0.4s ",t.style.opacity="1",t.style.animation="one-in 0.4s infinite",t.style["animation-iteration-count"]=1,e()},s)}};f=Object(n["a"])([Object(o["a"])({components:{Select:r["c"],GList:r["a"],Input:r["b"],Title:r["d"]},beforeRouteEnter(t,e,s){v["a"].$emit("toggleLoading",!0),Promise.allSettled([Object(c["c"])({...u}),Object(c["b"])(),Object(c["a"])()]).then(t=>{const[{value:e},{value:l},{value:a}]=t,{data:n}=e,{data:o}=l,{data:r}=a;setTimeout(()=>{v["a"].$emit("toggleLoading"),s(t=>{const e=(null===n||void 0===n?void 0:n.total_count)||0,s=(null===n||void 0===n?void 0:n.works)||[];t.temp[i.school].origin=o||[],t.temp[i.school].target=o||[],t.temp[i.mentor].origin=(null===r||void 0===r?void 0:r.teachers)||[],t.temp[i.mentor].target=((null===r||void 0===r?void 0:r.teachers)||[]).map(t=>t.name),t.list=s,t.totalCount=e,s.length===e&&(t.finished=!0)})},200)})}})],f);var g=f,b=g,m=(s("6397"),s("ef01"),s("0b56")),C=Object(m["a"])(b,l,a,!1,null,"7178bc60",null),y=C.exports},2565:function(t,e,s){},"283d":function(t,e,s){t.exports=s.p+"static/img/ranking-3.e67d970e.png"},3617:function(t,e,s){"use strict";s.d(e,"a",(function(){return j})),s.d(e,"c",(function(){return B})),s.d(e,"b",(function(){return W})),s.d(e,"d",(function(){return V}));var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"pulldown-sina"},[e("div",{ref:"bsWrapper",staticClass:"pulldown-bswrapper"},[e("div",{staticClass:"pulldown-scroller"},[e("div",{staticClass:"pulldown-tips"},[e("div",{domProps:{innerHTML:t._s(t.tipText)}})]),e("ul",{staticClass:"pulldown-list"},[t._l(t.list,(function(e){return[t._t("default",null,{item:e})]}))],2),e("div",{staticClass:"pullup-tips"},[t.finished?e("div",{staticClass:"before-trigger"},[e("span",{staticClass:"pullup-txt"},[t._v("已经到底啦")])]):t.isPullUpLoad?e("div",{staticClass:"after-trigger"},[e("span",{staticClass:"pullup-txt"},[t._v("加载中...")])]):e("div",{staticClass:"before-trigger"},[e("span",{staticClass:"pullup-txt"},[t._v("下拉加载更多")])])])])])])},l=[],a=s("fd63"),n=s("3c3a"),o=s("95ea"),r=s("7598"),c=s("5653"),u=s("1fd4");o["a"].use(r["a"]),o["a"].use(c["a"]),o["a"].use(u["a"]);const h={moving:{enter:"enter",leave:"leave"},fetching:"fetching",succeed:"succeed",top:"top"},d=800,p=70,v=56,f='<svg width="16" height="16" viewBox="0 0 512 512"><path fill="currentColor" d="M367.997 338.75l-95.998 95.997V17.503h-32v417.242l-95.996-95.995l-22.627 22.627L256 496l134.624-134.623l-22.627-22.627z"></path></svg>',g='<svg width="16" height="16" viewBox="0 0 512 512"><path fill="currentColor" d="M390.624 150.625L256 16L121.376 150.625l22.628 22.627l95.997-95.998v417.982h32V77.257l95.995 95.995l22.628-22.627z"></path></svg>',b={enter:f+" 下拉刷新",leave:g+" 释放刷新",fetching:"加载中...",succeed:"刷新成功",top:"已经到顶啦"};let m=class extends n["c"]{constructor(){super(...arguments),this.bscroll=null,this.tipText="",this.isPullUpLoad=!1}async pullingDownHandler(){this.setTipText(h.top),this.bscroll.finishPullDown(),setTimeout(()=>{this.bscroll.refresh()},d+50)}async pullingUpHandler(){this.finished||(this.isPullUpLoad=!0,await this.requestData(),await new Promise(t=>{setTimeout(()=>{t("")},2e3)})),this.bscroll.finishPullUp(),this.bscroll.refresh(),this.isPullUpLoad=!1}scrollToTop(){this.bscroll.scrollTo(0,0,300)}setTipText(t){this.tipText=b[t]}initBscroll(){this.bscroll=new o["a"](this.$refs.bsWrapper,{scrollY:!0,bounceTime:d,useTransition:!1,pullUpLoad:!0,pullDownRefresh:{threshold:p,stop:v},mouseWheel:!0,click:!0}),this.bscroll.on("pullingDown",this.pullingDownHandler),this.bscroll.on("pullingUp",this.pullingUpHandler),this.bscroll.on("scrollEnd",()=>{}),this.bscroll.on("enterThreshold",()=>{this.setTipText(h.top)}),this.bscroll.on("leaveThreshold",()=>{this.setTipText(h.top)})}mounted(){this.$nextTick(()=>{this.initBscroll()})}listChange(t,e){this.$nextTick(()=>{this.bscroll&&this.bscroll.refresh()})}};Object(a["a"])([Object(n["b"])({required:!0})],m.prototype,"list",void 0),Object(a["a"])([Object(n["b"])({required:!0})],m.prototype,"requestData",void 0),Object(a["a"])([Object(n["b"])({required:!0})],m.prototype,"refreshData",void 0),Object(a["a"])([Object(n["b"])({required:!0})],m.prototype,"finished",void 0),Object(a["a"])([Object(n["d"])("list",{deep:!0})],m.prototype,"listChange",null),m=Object(a["a"])([n["a"]],m);var C=m,y=C,w=(s("6e02"),s("0b56")),_=Object(w["a"])(y,i,l,!1,null,"08ca4140",null),j=_.exports,k=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"guet-select-wrap"},[e("div",{staticClass:"guet-select",class:{"guet-select_active":t.active,"guet-select_disabled":t.disabled},on:{click:t.showPicker}},[t.selectedText?e("span",{staticClass:"guet-select-text"},[t._v(" "+t._s(t.selectedText)+" ")]):e("span",{staticClass:"guet-select-placeholder"},[t._v(" "+t._s(t._placeholder)+" ")]),t.selectedText?t._e():e("i",{staticClass:"guet-select-icon"})])])},T=[];const O="picker-show",x="select-close";let P=class extends n["c"]{get _placeholder(){return this.placeholder}get selectedText(){return this.value}showPicker(){this.$emit(O)}handleClose(){this.$emit(x)}};Object(a["a"])([Object(n["b"])()],P.prototype,"placeholder",void 0),Object(a["a"])([Object(n["b"])({default:!1})],P.prototype,"active",void 0),Object(a["a"])([Object(n["b"])()],P.prototype,"value",void 0),Object(a["a"])([Object(n["b"])({default:!1})],P.prototype,"disabled",void 0),P=Object(a["a"])([n["a"]],P);var L=P,S=L,$=(s("4ab5"),Object(w["a"])(S,k,T,!1,null,"2928ed4a",null)),B=$.exports,Q=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"guet-input-wrapper"},[e("div",{staticClass:"guet-input",class:t.wrapClass,on:{click:t.handleInputClick}},[e("input",{ref:"input",staticClass:"guet-input__inner",attrs:{autocomplete:t.autocomplete,type:t.type,placeholder:t.placeholder},domProps:{value:t.inputVal},on:{input:t.handleInput,change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur}}),e("span",{staticClass:"guet-input__prefix"},[e("van-icon",{attrs:{name:"search"}})],1)]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.showClear,expression:"showClear"}],staticClass:"guet-input__clear",on:{click:t.handleClear}},[e("van-icon",{attrs:{name:"clear"}})],1)])},D=[];let q=class extends n["c"]{constructor(){super(...arguments),this.isFocus=!1}handleFocus(t){this.isFocus=!0,this.$emit("focus",t)}handleBlur(t){this.isFocus=!1,this.$emit("blur",t)}handleInput(t){this.$emit("input",t.target.value)}handleChange(t){this.$emit("change",t.target.value)}handleClear(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")}handleInputClick(){var t;null===(t=this.$refs.input)||void 0===t||t.focus()}get wrapClass(){return this.isFocus?"is-focus":""}get showClear(){return this.value}get inputVal(){return this.value}};Object(a["a"])([Object(n["b"])()],q.prototype,"placeholder",void 0),Object(a["a"])([Object(n["b"])()],q.prototype,"autocomplete",void 0),Object(a["a"])([Object(n["b"])({default:"text"})],q.prototype,"type",void 0),Object(a["a"])([Object(n["b"])()],q.prototype,"value",void 0),q=Object(a["a"])([n["a"]],q);var G=q,F=G,I=(s("fe8f"),Object(w["a"])(F,Q,D,!1,null,"0b35499d",null)),W=I.exports,U=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"guet-title-wrap"},[e("van-divider",{attrs:{"content-position":"center"}},[t._v(" "+t._s(t.title)+" ")]),t.subTitle?e("span",{staticClass:"sub-divider"},[t._v(t._s(t.subTitle))]):t._e()],1)},z=[];let E=class extends n["c"]{};Object(a["a"])([Object(n["b"])()],E.prototype,"title",void 0),Object(a["a"])([Object(n["b"])()],E.prototype,"subTitle",void 0),E=Object(a["a"])([n["a"]],E);var M=E,H=M,R=(s("992d"),Object(w["a"])(H,U,z,!1,null,"5f2dc438",null)),V=R.exports},"4ab5":function(t,e,s){"use strict";s("cdb5")},"4dc0":function(t,e,s){},6397:function(t,e,s){"use strict";s("d6c4")},6518:function(t,e,s){"use strict";s.d(e,"c",(function(){return l})),s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return n})),s.d(e,"d",(function(){return o}));var i=s("b32d");function l(t){return Object(i["a"])({url:"/api/work",method:"GET",params:t})}function a(t){return Object(i["a"])({url:"/api/school",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/api/teacher",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/api/work/"+t.id,method:"get"})}},"668f":function(t,e,s){t.exports=s.p+"static/img/ranking-1.68be5ce4.png"},"6e02":function(t,e,s){"use strict";s("2565")},7288:function(t,e,s){},"8b78":function(t,e,s){},"992d":function(t,e,s){"use strict";s("7288")},cdb5:function(t,e,s){},d6c4:function(t,e,s){},d9a7:function(t,e,s){t.exports=s.p+"static/img/people.7b26b342.svg"},dbc7:function(t,e,s){t.exports=s.p+"static/img/ranking-2.d2193f2e.png"},ef01:function(t,e,s){"use strict";s("8b78")},fe8f:function(t,e,s){"use strict";s("4dc0")}}]);