(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cb02835"],{"11fa":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return S}));var n,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"list-header-left",on:{click:e.handleonClickLeft}},[n("i",{staticClass:"van-icon van-icon-arrow-left van-nav-bar__arrow"})]),n("Title",{attrs:{title:"毕设展览",subTitle:"Online Show"}}),n("div",{staticClass:"list-content"},[n("div",{staticClass:"list-form"},[n("div",{staticClass:"list-select-group"},[n("Select",{attrs:{placeholder:"请选择学院",active:1===e.activeType},on:{"picker-show":function(t){return e.handlePickerShow(1)},"select-close":function(t){return e.handleSelectClose(1)}},model:{value:e.listQuery.school,callback:function(t){e.$set(e.listQuery,"school",t)},expression:"listQuery.school"}}),n("Select",{attrs:{placeholder:"选择奖项",active:3===e.activeType},on:{"picker-show":function(t){return e.handlePickerShow(3)},"select-close":function(t){return e.handleSelectClose(3)}},model:{value:e.listQuery.level,callback:function(t){e.$set(e.listQuery,"level",t)},expression:"listQuery.level"}})],1),n("Input",{attrs:{placeholder:"搜索毕设名称 / 学生名称"},model:{value:e.listQuery.query,callback:function(t){e.$set(e.listQuery,"query",t)},expression:"listQuery.query"}})],1),n("GList",{directives:[{name:"show",rawName:"v-show",value:e.list.length,expression:"list.length"}],attrs:{loading:e.loading,finished:e.finished,"finished-text":"没有更多了～"},on:{"update:loading":function(t){e.loading=t},load:e.onLoad}},[n("transition-group",{attrs:{name:"more",css:!1},on:{"before-enter":e.beforeEnter,enter:e.enter}},e._l(e.list,(function(t,a){return n("div",{key:t.id,staticClass:"project-item",attrs:{"data-index":a},on:{click:function(i){return e.handleItemClick(t.id)}}},[n("div",{staticClass:"project-image-wrap"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"item.cover"}],staticClass:"project-image"}),e.LevelImage[t.level]?n("img",{staticClass:"project-level-image",attrs:{src:e.LevelImage[t.level],alt:""}}):e._e()]),n("div",{staticClass:"project-content"},[n("h2",{staticClass:"project-title u-ellipsis"},[e._v(e._s(t.name))]),n("div",{staticClass:"project-info"},[n("div",{staticClass:"project-info-image"},[n("img",{attrs:{src:i("d9a7"),alt:""}})]),n("span",{staticClass:"project-owner-name"},[e._v(" "+e._s(t.student&&t.student.name)+" ")]),n("span",{staticClass:"project-school"},[e._v(" "+e._s(t.school)+" ")])]),n("div",{staticClass:"project-description u-mutiple-ellipsis"},[n("span",[e._v(e._s(t.brief))])])])])})),0)],1),n("van-empty",{directives:[{name:"show",rawName:"v-show",value:!e.list.length,expression:"!list.length"}],staticClass:"list-custom-image",attrs:{description:"暂无数据～"}})],1),n("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.handleClosePopup},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.curColumns},on:{cancel:e.handleCancel,confirm:e.handleConfirm}})],1)],1)},o=[],s=i("2909"),l=i("1da1"),r=i("3835"),c=i("5530"),u=i("ade3"),d=i("d4ec"),h=i("bee2"),v=i("262e"),p=i("2caf"),f=(i("96cf"),i("d3b7"),i("820e"),i("3ca3"),i("ddb0"),i("d81d"),i("b0c0"),i("7db0"),i("99af"),i("ac1f"),i("5319"),i("9ab4")),m=i("1b40"),g=i("3617"),b=i("6518");(function(e){e[e["school"]=1]="school",e[e["mentor"]=2]="mentor",e[e["level"]=3]="level",e[e["default"]=-1]="default"})(n||(n={}));var y={page:1,pageSize:10},k={origin:[{id:0,name:"无奖项"},{id:1,name:"一等奖"},{id:2,name:"二等奖"},{id:3,name:"三等奖"}],target:["无奖项","一等奖","二等奖","三等奖"]},j=i("4758"),C=function(e){Object(v["a"])(a,e);var t=Object(p["a"])(a);function a(){var e,o;return Object(d["a"])(this,a),o=t.apply(this,arguments),o.LevelImage={1:i("668f"),2:i("dbc7"),3:i("283d")},o.activeType=n.default,o.listQuery={query:"",mentor:"",level:"",school:""},o.temp=(e={},Object(u["a"])(e,n.school,{origin:[],target:[]}),Object(u["a"])(e,n.mentor,{origin:[],target:[]}),Object(u["a"])(e,n.level,k),e),o.page=y.page,o.pageSize=y.pageSize,o.showPicker=!1,o.curColumns=[],o.list=[],o.loading=!0,o.totalCount=0,o.finished=!1,o.debounceGetWorks=Object(j["a"])((function(){o.handleGetWorks(!0)}),300),o.throttleGetWorks=Object(j["b"])(o.handleLoadMore,100),o}return Object(h["a"])(a,[{key:"created",value:function(){var e=this;Promise.allSettled([Object(b["c"])(Object(c["a"])({},y)),Object(b["b"])(),Object(b["a"])()]).then((function(t){var i=Object(r["a"])(t,3),a=i[0].value,o=i[1].value,s=i[2].value,l=a.data,c=o.data,u=s.data,d=(null===l||void 0===l?void 0:l.total_count)||0,h=(null===l||void 0===l?void 0:l.works)||[];e.temp[n.school].origin=c||[],e.temp[n.school].target=c||[],e.temp[n.mentor].origin=(null===u||void 0===u?void 0:u.teachers)||[],e.temp[n.mentor].target=((null===u||void 0===u?void 0:u.teachers)||[]).map((function(e){return e.name})),e.list=h,e.totalCount=d,h.length===d&&(e.finished=!0),e.loading=!1}))}},{key:"onLoad",value:function(){this.finished||this.throttleGetWorks()}},{key:"handleLoadMore",value:function(){var e=this.page+1;this.page=e,this.handleGetWorks()}},{key:"handleListQuery",value:function(){var e=Object(c["a"])({},this.listQuery);if(e.mentor&&"string"===typeof e.mentor){var t=this.temp[n.mentor],i=((null===t||void 0===t?void 0:t.origin)||[]).find((function(t){return t.name===e.mentor}));i&&(e.mentor=i.id)}if(e.level&&"string"===typeof e.level){var a=this.temp[n.level],o=((null===a||void 0===a?void 0:a.origin)||[]).find((function(t){return t.name===e.level}));o&&(e.level=o.id)}return Object(c["a"])(Object(c["a"])({},e),{},{page:this.page,pageSize:this.pageSize})}},{key:"handleGetWorks",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var i,n,a,o,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.loading=!0),e.next=3,Object(b["c"])(this.handleListQuery());case 3:i=e.sent,n=i||{},a=n.data,o=(null===a||void 0===a?void 0:a.works)||[],l=null===a||void 0===a?void 0:a.total_count,!t&&o.length&&(this.list=(r=this.list).concat.apply(r,Object(s["a"])(o))),t&&(this.list=o),this.loading=!1,this.totalCount=l,this.list.length===l&&(this.finished=!0);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleItemClick",value:function(e){e&&this.$router.push({path:"/detail/".concat(e)})}},{key:"onClickLeft",value:function(){this.$router.replace({path:"/"})}},{key:"handleClosePopup",value:function(){this.reset()}},{key:"handleCancel",value:function(){this.reset()}},{key:"reset",value:function(){this.activeType=n.default,this.showPicker=!1}},{key:"handleConfirm",value:function(e){if(this.activeType){var t=n[this.activeType];t&&(this.listQuery[t]=e)}this.activeType=n.default,this.showPicker=!1}},{key:"handleSelectClose",value:function(e){var t=n[e];this.listQuery[t]=""}},{key:"handlePickerShow",value:function(e){this.activeType=e,this.showPicker=!0;var t=this.temp[e];this.curColumns=(null===t||void 0===t?void 0:t.target)||[]}},{key:"beforeEnter",value:function(e){e.style.opacity="0"}},{key:"enter",value:function(e,t){var i=100*e.dataset.index;setTimeout((function(){e.style.transition="opacity 0.4s ",e.style.opacity="1",e.style.animation="one-in 0.4s infinite",e.style["animation-iteration-count"]=1,t()}),i)}},{key:"handleonClickLeft",value:function(){this.$router.go(-1)}},{key:"activeTypeChange",value:function(e,t){this.debounceGetWorks()}}]),a}(m["c"]);Object(f["a"])([Object(m["d"])("listQuery",{deep:!0})],C.prototype,"activeTypeChange",null),C=Object(f["a"])([Object(m["a"])({components:{Select:g["c"],GList:g["a"],Input:g["b"],Title:g["d"]}})],C);var w=C,O=w,x=(i("75d4"),i("b579"),i("2877")),Q=Object(x["a"])(O,a,o,!1,null,"ba6c734a",null),S=Q.exports},"283d":function(e,t,i){e.exports=i.p+"static/img/ranking-3.f0b7d7ef.png"},6518:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"d",(function(){return l}));var n=i("b32d");function a(e){return Object(n["a"])({url:"/api/work",method:"GET",params:e})}function o(e){return Object(n["a"])({url:"/api/school",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/api/teacher",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/api/work/".concat(e.id),method:"get"})}},"668f":function(e,t,i){e.exports=i.p+"static/img/ranking-1.8b793866.png"},"75d4":function(e,t,i){"use strict";i("ca3c")},"78be":function(e,t,i){},b579:function(e,t,i){"use strict";i("78be")},ca3c:function(e,t,i){},dbc7:function(e,t,i){e.exports=i.p+"static/img/ranking-2.4afa79f6.png"}}]);